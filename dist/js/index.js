"use strict";function indexWork(){$(".aside_top").click(goTop),$(".sign_out").click(function(){alert("退出成功"),$.cookie("user",null,{expires:-1,path:"/"}),window.location.reload()}),Wiscookie(),indexlick()}function indexlick(){$.ajax({type:"get",url:"api/car_goods.php",data:{state:"like"},success:function(n){var e=JSON.parse(n).list.map(function(n){var e=n.img.split(",");return'<li data-id="'+n.id+'">\n                            <div class="lk_imgs"><img src="image/list/'+e[0]+'" alt=""></div>\n                            <div class="lk_title whole_dan">'+n.title+'</div>\n                            <div class="lk_price"><span class="lk_pprice">'+n.pprice+'</span><span class="lk_oprice">'+n.oprice+'</span><a href="##">购买</a></div>\n                        </li>'}).join("");$(".likegoods").html(e)}})}function indexClick(){$(".go_login").click(function(){$.cookie("adreess",window.location.href,{path:"/"}),window.location.href="html/login.html"}),$(".login").click(function(){$.cookie("adreess",window.location.href,{path:"/"}),window.location.href="html/login.html"}),$(".go_reg").click(function(){window.location.href="html/reg.html"}),$(".shop_you li").on("click",function(){window.open("html/details.html?id="+this.dataset.id)}),$(".goods_fen").on("click",function(){var n="html/list.html?class="+$(this).children("h3").children("a").html()+"&sort=time";window.open(n)}),$(".car_btn").click(function(){window.location.href="html/car.html"}),$(".state_order").click(function(){window.location.href="html/car.html"}),$(".aside_car").on("click",".car_dleBtn",function(){var n={username:decodeURIComponent($.cookie("user")),title:$(this).prev().prev().prev().html(),shop:$(this).parent().parent().parent().prev().html(),size:$(this).prev().prev().children("span").eq(0).html(),color:$(this).prev().prev().children("span").eq(1).html()};$.ajax({type:"get",url:"api/del_goods.php",data:n,success:function(n){1*n&&($(".con_main div").remove(),Wiscookie())}}),$(this).parent().parent().remove()}),$(".like").on("click","li",function(){window.open("html/details.html?id="+$(this).attr("data-id"))})}function insClick(){$(".aside_top").click(goTop),$(".go_login").click(function(){$.cookie("adreess",window.location.href,{path:"/"}),window.location.href="login.html"}),$(".login").click(function(){$.cookie("adreess",window.location.href,{path:"/"}),window.location.href="login.html"}),$(".go_reg").click(function(){window.location.href="reg.html"}),$(".car_btn").click(function(){window.location.href="car.html"}),$(".state_order").click(function(){window.location.href="car.html"}),$(".aside_car").on("click",".car_dleBtn",function(){var n={username:decodeURIComponent($.cookie("user")),title:$(this).prev().prev().prev().html(),shop:$(this).parent().parent().parent().prev().html(),size:$(this).prev().prev().children("span").eq(0).html(),color:$(this).prev().prev().children("span").eq(1).html()};$.ajax({type:"get",url:"../api/del_goods.php",data:n,success:function(n){1*n&&($(".con_main div").remove(),Niscookie())}}),$(this).parent().parent().remove()}),$(".sign_out").click(function(){alert("退出成功"),$.cookie("user",null,{expires:-1,path:"/"}),window.location.reload()})}function Wiscookie(){$.cookie("user")&&(hasUid(),$.ajax({type:"get",url:"api/car_goods.php",data:{uid:decodeURIComponent($.cookie("user"))},success:function(n){WasideCar(n)}}))}function Niscookie(){$.cookie("user")&&(hasUid(),$.ajax({type:"get",url:"../api/car_goods.php",data:{uid:decodeURIComponent($.cookie("user"))},success:function(n){NasideCar(n)}}))}function hasUid(){$(".login").css({display:"none"}).next().css({display:"none"}).next().css({display:"inline-block"}),$('<a href="javascript:;" class="user">您好,'+decodeURIComponent($.cookie("user"))+"</a>").prependTo(".toll_right"),$(".state_not").css({display:"none"}).next().css({display:"block"}),$(".aside_user").html(decodeURIComponent($.cookie("user"))),$(".car_empty").css({display:"none"})}function WasideCar(n){var i=JSON.parse(n);if(0<i.length){$("#car_empty").css({display:"none"});var e=[],t=0,o=0;i.map(function(n){e.push(n.shop),t+=1*n.num,o+=n.num*n.money}),$(".car_num span").html(t),$(".foot_num").html("共"+t+"件商品"),$(".foot_price").html(o);for(var a=Dupli(e),c=0;c<a.length;c++)$('<div class="goods" data-shop="'+a[c]+'"><div class="title">'+a[c]+"</div><ul>"+s(a[c])+"</ul></div>").prependTo(".con_main")}else $("#car_empty").css({display:"block"}),$(".car_num span").html(0),$(".foot_num").html("共0件商品"),$(".foot_price").html(0);function s(e){return i.map(function(n){if(n.shop==e)return'<li data-id="'+n.id+'">\n                            <div class="car_img">\n                                <img src="'+n.imgurl+'" alt="">\n                            </div>\n                            <div class="carLi_text">\n                                <p class="whole_dan">'+n.title+"</p>\n                                <p><span>"+n.size+"</span><span>"+n.color+'</span></p>\n                                <p><span class="car_price">'+n.money+"</span>*"+n.num+'</p>\n                                <a href="##" class="car_dleBtn">删除</a>\n                            </div>\n                        </li>'}).join("")}}function NasideCar(n){var i=JSON.parse(n);if(0<i.length){$("#car_empty").css({display:"none"});var e=[],t=0,o=0;i.map(function(n){e.push(n.shop),t+=1*n.num,o+=n.num*n.money}),$(".car_num span").html(t),$(".foot_num").html("共"+t+"件商品"),$(".foot_price").html(o);for(var a=Dupli(e),c=0;c<a.length;c++)$('<div class="goods" data-shop="'+a[c]+'"><div class="title">'+a[c]+"</div><ul>"+s(a[c])+"</ul></div>").prependTo(".con_main")}else $("#car_empty").css({display:"block"}),$(".car_num span").html(0),$(".foot_num").html("共0件商品"),$(".foot_price").html(0);function s(e){return i.map(function(n){if(n.shop==e)return'<li data-id="'+n.id+'">\n                            <div class="car_img">\n                                <img src="../'+n.imgurl+'" alt="">\n                            </div>\n                            <div class="carLi_text">\n                                <p class="whole_dan">'+n.title+"</p>\n                                <p><span>"+n.size+"</span><span>"+n.color+'</span></p>\n                                <p><span class="car_price">'+n.money+"</span>*"+n.num+'</p>\n                                <a href="##" class="car_dleBtn">删除</a>\n                            </div>\n                        </li>'}).join("")}}function indexSlide(n){var e=document.querySelector(n),i=e.children[0],t=i.children,o=t.length,a=t[0].clientWidth,c=0,s=null,r=document.createElement("div");r.className="btn";for(var l=0;l<o;l++){var p=document.createElement("span");r.appendChild(p)}e.appendChild(r);var d=r.children;d[0].className="active";for(var u=function(e){d[e].onclick=function(){for(var n=0;n<o;n++)d[n].className="";this.className="active",c=e,i.style.left=-c*a+"px"}},h=0;h<o;h++)u(h);function m(){o<=++c&&(c=0),i.style.left=-c*a+"px",function(){for(var n=0;n<o;n++)d[n].className=c==n?"active":""}()}s=setInterval(m,3e3),e.onmouseover=function(){return clearInterval(s)},e.onmouseout=function(){return s=setInterval(m,3e3)}}function goTop(){$("html,body").animate({scrollTop:0},200)}function getRequest(){var n=window.location.search,e=new Object;if(-1!=n.indexOf("?"))for(var i=n.substr(1).split("&"),t=0;t<i.length;t++)e[i[t].split("=")[0]]=decodeURI(i[t].split("=")[1]);return e}function listArr(){$(".list_search dl").on("click",".more",function(){$(this).parent().toggleClass("auto")}),$(".sma_img img").on("mouseenter",function(){$(this).css({border:"1px #e60063 solid"}),$(this).parent().parent().prev().children("img").attr("src",""+this.src).next().css({display:"block"})}),$(".sma_img img").on("mouseleave",function(){$(this).css({border:"1px #000 solid"}),$(this).parent().parent().prev().children("img").attr("src",""+this.src).next().css({display:"none"})})}var RegObj={act:function(n){return/^\w{5,18}$/.test(n)},cha:function(n){return/^[\u4e00-\u9fa5]+$/.test(n)},tel:function(n){return/^1(3|4|5|7|8)\d{9}$/.test(n)},email:function(n){return/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(n)},ID:function(n){return/^\d{15}|\d{18}$/.test(n)},bth:function(n){return/^(19|20)\d{2}-(1[0-2]|0?[1-9])-(0?[1-9]|[1-2][0-9]|3[0-1])$/.test(n)},psw:function(n){return/^\d{6,18}$/.test(n)}};function randomNum(n){for(var e="",i=0;i<n;i++)e+=parseInt(10*Math.random());return e}function Dupli(n){for(var e=[],i=0;i<n.length;i++){var t=n[i];-1==$.inArray(t,e)&&e.push(t)}return e}